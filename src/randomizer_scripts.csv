//Slug vacuum/upgrade																																									
onload	jungle_misty_meadow	triggerInput("enable", "#1485")																																							
onenter	jungle_misty_meadow	triggerInput("set", "#2388")																																							
onenter	hub_village	triggerInput("set", "#4547")																																							
																																									
//Spring key																																									
onpickup	spring_key	spring_gangway_grotto:4595	set																																						
skip_onpickup	spring_gangway_grotto:4531																																								
																																									
// Dive fish																																									
replace_script	spring_bubbly_basin:1139	function self.talk1() dialogBegin("dive_fish") dialogLine(1) dialogEnd() triggerOutput("give_fish") end																																							
																																									
//Mushrooms																																									
onload	intro_landing_upper	triggerInput("disable", "#5365") triggerInput("hide", "#5394") triggerInput("destroy", "#5392") triggerInput("disable", "#5599") triggerInput("hide", "#5605") triggerInput("destroy", "#5604")																																							
onpickup	mushroom_2	intro_landing_upper:5141	complete																																						
onpickup	mushroom_3	intro_landing_upper:5141	complete																																						
																																									
//Toolbox																																									
onload	hub_village	triggerInput("disable", "#4687") triggerInput("hide", "#4686") triggerInput("destroy", "#4690") triggerInput("disable", "#4661") triggerInput("disable", "#4658")																																							
																																									
//Skvader																																									
onenter	hub_left_lofty_logo	triggerInput("set", "#501")																																							
onenter	spring_cloudburst_cliffs	triggerInput("set", "#4985")																																							
																																									
//Tadpole																																									
onload	spring_bubbly_basin	triggerInput("destroy", "#1041") triggerInput("destroy", "#1232") triggerInput("destroy", "#1226") triggerInput("destroy", "#1229") triggerInput("destroy", "#1235") triggerInput("destroy", "#1241") triggerInput("destroy", "#1238") triggerInput("destroy", "#1244") triggerInput("disable", "#1042") triggerInput("disable", "#1227") triggerInput("disable", "#1230") triggerInput("disable", "#1233") triggerInput("disable", "#1236") triggerInput("disable", "#1239") triggerInput("disable", "#1242") triggerInput("disable", "#1245")																																							
																																									
// Idol_2																																									
replace_script	cave_temple_terror_lower:4750	function self.talk1() dialogBegin("willo_temple") triggerOutput("disable_trigger") dialogLine(1) dialogEnd() playAnim("press_button") setAnimHold("hold_button") triggerOutput("talk1done") dialogEnd() end  function self.talk2() dialogBegin("willo_temple") if hasCompletedQuest("hub_willo_pt2") == 1 then dialogLine(3) triggerOutput("complete") if hasCompletedQuest("hub_willo_pt3") == 1 then triggerOutput("return_quest") end else dialogLine(2) end dialogEnd() end																																							
																																									
// Idol_3																																									
replace_script	peak_crystal_crater:2362	function self.talk1() showExclamation(0) dialogBegin("willo_peak") dialogLine(1) triggerOutput("cam_icicle") dialogLine(2) triggerOutput("cam_return") dialogLine(3) dialogEnd() lockControls(1) playAnim("equip_mirror") setAnimHold("hold_idle_mirror") wait(2000) dialogBegin("willo_peak") dialogLine(4) dialogEnd() lockControls(0) triggerOutput("talk1done") end function self.talk2() dialogBegin("willo_peak") dialogLine(5) dialogEnd() end function self.talk3() dialogBegin("willo_peak") dialogLine(6) dialogEnd() triggerOutput("talk3done") end function self.talk4() dialogBegin("willo_peak") if getItemCount("nugget") == 4 then dialogLine(8) triggerOutput("repair") else dialogLine(7) end dialogEnd() end 																																							
																																									
// Willo																																									
replace_script	hub_village:2718	function self.talk1() showExclamation(0) dialogBegin("willo_village") dialogLine(1) dialogLine(2) dialogEnd() triggerOutput("talk1done") triggerOutput("re_enable_trigger") end function self.talk2() dialogBegin("willo_village") dialogLine(2) dialogEnd() end function self.talk3_old() dialogBegin("willo_village") dialogLine(3) dialogLine(4) dialogLine(5) triggerOutput("start_quest") dialogEnd() triggerOutput("re_enable_trigger") end function self.talk4() triggerOutput("decline_quest") end function self.talk5() dialogBegin("willo_village") if hasItem("idol1") == 1 or hasItem("idol2") == 1 or hasItem("idol3") == 1 or hasItem("idol4") == 1 then dialogLine(8) triggerOutput("re_enable_trigger") else dialogLine(7) end dialogEnd() end function self.talk6_old() dialogBegin("willo_village") dialogLine(9) local count = isStateSet("pt1") + isStateSet("pt2") + isStateSet("pt3") + isStateSet("pt4")  if count == 3 then dialogLine(10) triggerOutput("final_quest") elseif isStateSet("pt2") == 0 and isStateSet("pt3") == 1 then dialogLine(21) else  dialogLine(20) end dialogEnd() triggerOutput("re_enable_trigger") end function self.talk7_old() lockControls(1) dialogBegin("willo_village") dialogLine(11) triggerOutput("cam_umbaba") triggerOutput("statue_crack") dialogLine(12) triggerOutput("cam_willo") triggerOutput("umbaba_appear") dialogLine(13) triggerOutput("cam_umbaba") dialogEnd() wait(250) triggerOutput("start_pt_2") end function self.talk7pt3() dialogBegin("willo_village") dialogLine(14) triggerOutput("cam_umbaba") dialogEnd() wait(250) triggerOutput("start_pt_4") end function self.talk7pt5() dialogBegin("willo_village") dialogLine(15) triggerOutput("reward") triggerOutput("cam_return") dialogEnd() lockControls(0) end function self.talk8() dialogBegin("willo_village") triggerOutput("cam_willo") dialogLine(16) dialogEnd() triggerOutput("start_talk8_pt2") lockControls(1) end function self.combo() local count = isStateSet("pt1") + isStateSet("pt2") + isStateSet("pt3") + isStateSet("pt4")  if count == 4 then self.talk7_old() elseif count == 2 or count == 3 then self.talk6_old() else self.talk3_old() end end function self.talk3() self.combo() end function self.talk6() self.combo() end function self.talk7() self.combo() end																																							
																																									
// Rune flipper @ Kickback																																									
onload	jungle_canyon_caper	triggerInput("set", "#2142")																																							
																																									
// Mailbag																																									
replace_script	jens_soaring_heights:109	function self.mailbox_counter_check() if getMailDeliveryCount() == 10 then triggerOutput("mailbox_10_quest") randomizerSpawn("hub_village:4159") end end																																							
																																									
// Ohm next to seed pod fix																																									
replace_script	peak_beanstalk_base:2303	function self.talk1() dialogBegin("omh") showExclamation(0) dialogLine(1) if isStateSet("spawned") == 0 then triggerOutput("cam_pod") dialogLine(2) else triggerOutput("quest_done") end triggerOutput("cam_return") if hasItem("bucket_full") == 1 and hasItem("guano") == 1 and hasItem("seed_pod") == 1 then triggerOutput("return_quest") end dialogEnd() end																																							
																																									
// Jamja already have all items fix																																									
replace_script	peak_beanstalk_base:2142	function self.talk1() showExclamation(0) dialogBegin("jamja_camp") dialogLine(1) dialogLine(2) triggerOutput("cam_wreckage") dialogLine(3) triggerOutput("cam_return") dialogLine(4) triggerOutput("cam_omh") dialogLine(5) triggerOutput("cam_yoku") dialogLine(6) triggerOutput("cam_tilo") dialogLine(7) triggerOutput("cam_return") dialogLine(8) dialogEnd() triggerOutput("talk1done") end function self.talk2() if hasItem("bucket_full") == 1 then self.talk3() triggerInput("set", "#3156") else dialogBegin("jamja_camp") dialogLine(9) dialogEnd() end end function self.talk3() if hasItem("bucket_full") == 1 and hasItem("guano") == 1 and hasItem("seed_pod") == 1 then self.talk4() else showExclamation(0) dialogBegin("jamja_camp") dialogLine(10) dialogEnd() triggerOutput("talk3done") end end function self.talk4() showExclamation(0) dialogBegin("jamja_camp") dialogLine(11) dialogEnd() triggerOutput("talk4done") end function self.talk5() dialogBegin("jamja_camp") dialogLine(12) dialogEnd() triggerOutput("talk5done") triggerOutput("cam_return") lockControls(0) end																																							
																																									
// Jamja bucket fix																																									
replace_script	peak_ice_cold_idol:3539	function self.run() if hasActiveQuest("peak_climb_4") == 1 or hasActiveQuest("peak_climb_5") == 1 or hasActiveQuest("peak_climb_6") == 1 or hasActiveQuest("peak_climb_7") == 1 or hasActiveQuest("peak_climb_8") == 1 or hasActiveQuest("peak_climb_9") == 1 or hasActiveQuest("peak_climb_10") == 1 then triggerOutput("move") end end																																							
																																									
// Nimkey fix																																									
replace_script	hub_festival_upper:874	function self.run() addItem("instrument_pile") triggerOutput("return_quest") randomizerSpawn("hub_festival:3819") end																																							
																																									
// Traitor fix																																									
replace_script	jungle_slug_struggle:3738	function self.run() end																																							
																																									
// Jojo fix																																									
replace_script	spring_gangway_grotto:1125	function self.talk1() dialogBegin("jojo") if hasActiveQuest("main_find_chief_spring") == 1 then showExclamation(0) dialogLine(1) triggerOutput("cam_gate") dialogLine(2) triggerOutput("cam_return") dialogLine(3) triggerOutput("Talk1Done") else dialogLine(6) if dialogChoice(7, "choice_general_yes", "choice_join") == 0 or 1 then triggerOutput("disable_trigger") lockControls(1) dialogLine(8) dialogEnd() triggerOutput("show_overlay") fadeInOverlayBlack(1000) triggerOutput("cam_outside") wait(500) fadeOutOverlay(1000) wait(1000) triggerOutput("throw_ball") pushBall(2.4,-3) wait(500) lockControls(0) triggerOutput("enable_trigger") end end dialogEnd() end function self.talk2() dialogBegin("jojo") dialogLine(4) dialogEnd() triggerOutput("Talk2Done") end function self.talk3() dialogBegin("jojo") dialogLine(5) triggerOutput("Talk1Done") showExclamation(0) dialogEnd() triggerOutput("talk3done") end																																							
																																									
// Boon fix																																									
onenter	peak_spacemonk_mystery	if hasActiveQuest("main_find_chief_peak_1") == 1 then triggerInput("enable", "#1550") triggerInput("set", "#1551") triggerInput("enable", "#1549") end																																							
																																									
// Sal fix																																									
onenter	cave_temple_terror_upper	if hasActiveQuest("main_find_chief_cave") == 1 then triggerInput("set", "#4228") end																																							
																																									
// Nim main quest fix																																									
replace_script	hub_festival:339	function self.greet() dialogBegin("nim") showExclamation(0) if hasCompletedQuest("main_resignation") == 0 then triggerOutput("cam_nim") dialogLine(1) triggerOutput("cam_moku") dialogLine(2) triggerOutput("cam_mark") dialogLine(3) triggerOutput("mark_pulse") dialogLine(4) triggerOutput("cam_nim") dialogLine(5) triggerOutput("cam_return") triggerOutput("repair_bridge") else if isStateSet("nim down") == 0 then dialogLine(20) else dialogLine(21) end end if hasCompletedQuest("main_find_chief_spring") == 1 and isStateSet("thank1") == 0 then dialogLine(6) triggerOutput("thank1") end if hasCompletedQuest("main_find_chief_cave") == 1 and isStateSet("thank2") == 0 then dialogLine(7) triggerOutput("thank2") end if hasCompletedQuest("main_find_chief_peak") == 1 and isStateSet("thank3") == 0 then dialogLine(8) triggerOutput("thank3") end if hasCompletedQuest("main_find_chief_spring") == 0 then if isStateSet("nim down") == 0 then dialogLine(10) else dialogLine(22) end elseif hasCompletedQuest("main_find_chief_cave") == 0 then dialogLine(11) elseif hasCompletedQuest("main_find_chief_peak") == 0 then dialogLine(12) end dialogEnd() triggerOutput("visit_nim") end function self.instruments_1() triggerOutput("complete_q_return_to_nim") dialogBegin("nim") if hasActiveQuest("main_get_instrument") == 0 then dialogLine(91) end dialogLine(92) if isStateSet("key_given") == 0 then dialogLine(93) triggerOutput("give_key") end dialogEnd() triggerOutput("get_instruments") if hasItem("abilities/kickback") == 1 then lockControls(1) wait(1000) triggerOutput("spawn_kickback") removeItem("abilities/kickback") end end function self.instruments_2() triggerOutput("visit_nim") dialogBegin("nim") dialogLine(94) if dialogChoice(95, "choice_general_yes", "choice_general_no") == 0 then removeItem("instrument_pile") dialogLine(97) triggerOutput("finished") lockControls(1) else dialogLine(96) end dialogEnd() end function self.ritual_1() dialogBegin("nim") dialogLine(14) triggerOutput("ritual_1_done") dialogEnd() end function self.ritual_2() wait(1000) dialogBegin("nim") dialogLine(15) dialogEnd() fadeInOverlayBlack(1000) triggerOutput("ritual_2_done") wait(1000) fadeOutOverlay(1000) lockControls(0) dialogEnd() end function self.cutscene_win() lockControls(1) triggerOutput("cam_ending") playSound("scr_EndingMoku_PreAppear") triggerOutput("shake") wait(1000) fadeOutOverlay(1000) wait(3000) triggerOutput("cam_nim_focus") wait(2000) dialogBegin("nim") dialogLine(16) dialogEnd() playSound("scr_Ending_Moku_Reappear") triggerOutput("cam_end_shot_2") triggerOutput("shake") wait(3000) triggerOutput("moku_appear") wait(8000) triggerOutput("cam_yoku_focus") wait(5000) triggerOutput("cam_nim_focus") dialogBegin("nim") dialogLine(17) dialogEnd() triggerOutput("cam_ending") wait(500) triggerOutput("CreditsMusic") wait(2500) triggerOutput("sing_pt_2") wait(10000) triggerOutput("end_scenes") unlockAchievement("end_1") showCredits(1.2) triggerOutput("credits_done") end function self.talkNG_1() lockControls(1) wait(1000) fadeOutOverlay(1000) dialogBegin("nim") dialogLine(30) dialogEnd() lockControls(0) triggerOutput("enable_trigger") end function self.talkNG_2() dialogBegin("nim") dialogLine(31) dialogEnd() triggerOutput("save_game") end																																							
																																									
// Orestation softlock																																									
onenter	peak_aerial_ascent	triggerInput("break", "#2327")																																							
																																									
// Rinri village fix																																									
replace_script	hub_village:2708	function self.talk2() dialogBegin("rinri") dialogLine(1) if dialogChoice(2, "choice_general_yes", "choice_general_no") == 0 then dialogLine(4) triggerOutput("spore_1") else dialogLine(3) end dialogEnd() end function self.spore_clue() dialogBegin("rinri") if hasItem("spores_2") == 1 then dialogLine(6) elseif hasItem("spores_3") == 1 then dialogLine(7) elseif hasItem("spores_4") == 1 then dialogLine(8) elseif hasItem("spores_5") == 1 then dialogLine(9) else dialogLine(5) end dialogEnd() end function self.reward() triggerOutput("spore_1") dialogBegin("rinri") dialogLine(10) dialogLine(11) dialogEnd() triggerOutput("reward") end function self.talk3() dialogBegin("rinri") dialogLine(12) dialogEnd() end																																							
																																									
//Dusk fix																																									
replace_script	jungle_spikey_stockade:169	function self.talk1() dialogBegin("dusk") dialogLine(1) dialogEnd() end function self.talk2() dialogBegin("dusk") showExclamation(0) dialogLine(2) triggerOutput("enable_quest") dialogEnd() end function self.talk3() dialogBegin("dusk") if hasItem("traitor_spirit") == 1 then dialogLine(4) elseif getCounter("returned_spirits") > 0 then dialogLine(5) else dialogLine(3) end dialogEnd() end function self.talk4() triggerOutput("enable_quest") dialogBegin("dusk") showExclamation(0) dialogLine(6) triggerOutput("reward") dialogEnd() end function self.talk5() dialogBegin("dusk") dialogLine(7) dialogEnd() end																																							

//Easy Mode
onenter	intro_landing	if hasItem("tracker_jungle") == 0 then addItem("tracker_jungle") end if hasItem("tracker_caves") == 0 then addItem("tracker_caves") end if hasItem("tracker_peak") == 0 then addItem("tracker_peak") end if hasItem("tracker_springs") == 0 then addItem("tracker_springs") end if hasItem("tracker_scarabs") == 0 then addItem("tracker_scarabs") end if hasItem("treasure_map") == 0 then addItem("treasure_map") end
